// author https://www.npmjs.com/~kpdecker
// license BSD-3
(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(){}function o(e,t,n,o,r){for(var i=0,u=t.length,s=0,a=0;i<u;i++){var p=t[i];if(p.removed){if(p.value=e.join(o.slice(a,a+p.count)),a+=p.count,i&&t[i-1].added){var c=t[i-1];t[i-1]=t[i],t[i]=c}}else{if(!p.added&&r){var l=n.slice(s,s+p.count);l=l.map((function(e,t){var n=o[a+t];return n.length>e.length?n:e})),p.value=e.join(l)}else p.value=e.join(n.slice(s,s+p.count));s+=p.count,p.added||(a+=p.count)}}var f=t[u-1];return u>1&&"string"==typeof f.value&&(f.added||f.removed)&&e.equals("",f.value)&&(t[u-2].value+=f.value,t.pop()),t}e.r(t),e.d(t,{diffChars:()=>i}),n.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.callback;"function"==typeof n&&(r=n,n={}),this.options=n;var i=this;function u(e){return r?(setTimeout((function(){r(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var s=(t=this.removeEmpty(this.tokenize(t))).length,a=e.length,p=1,c=s+a;n.maxEditLength&&(c=Math.min(c,n.maxEditLength));var l=[{newPos:-1,components:[]}],f=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=s&&f+1>=a)return u([{value:this.join(t),count:t.length}]);function v(){for(var n=-1*p;n<=p;n+=2){var r=void 0,c=l[n-1],f=l[n+1],v=(f?f.newPos:0)-n;c&&(l[n-1]=void 0);var h=c&&c.newPos+1<s,d=f&&0<=v&&v<a;if(h||d){if(!h||d&&c.newPos<f.newPos?(r={newPos:(m=f).newPos,components:m.components.slice(0)},i.pushComponent(r.components,void 0,!0)):((r=c).newPos++,i.pushComponent(r.components,!0,void 0)),v=i.extractCommon(r,t,e,n),r.newPos+1>=s&&v+1>=a)return u(o(i,r.components,t,e,i.useLongestToken));l[n]=r}else l[n]=void 0}var m;p++}if(r)!function e(){setTimeout((function(){if(p>c)return r();v()||e()}),0)}();else for(;p<=c;){var h=v();if(h)return h}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var r=t.length,i=n.length,u=e.newPos,s=u-o,a=0;u+1<r&&s+1<i&&this.equals(t[u+1],n[s+1]);)u++,s++,a++;return a&&e.components.push({count:a}),e.newPos=u,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var r=new n;function i(e,t,n){return r.diff(e,t,n)}var u=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,s=/\S/,a=new n;a.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!s.test(e)&&!s.test(t)},a.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&u.test(t[n])&&u.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var p=new n;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}p.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var o=0;o<n.length;o++){var r=n[o];o%2&&!this.options.newlineIsToken?t[t.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),t.push(r))}return t},(new n).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new n).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var l=Object.prototype.toString,f=new n;function v(e,t,n,o,r){var i,u;for(t=t||[],n=n||[],o&&(e=o(r,e)),i=0;i<t.length;i+=1)if(t[i]===e)return n[i];if("[object Array]"===l.call(e)){for(t.push(e),u=new Array(e.length),n.push(u),i=0;i<e.length;i+=1)u[i]=v(e[i],t,n,o,r);return t.pop(),n.pop(),u}if(e&&e.toJSON&&(e=e.toJSON()),"object"===c(e)&&null!==e){t.push(e),u={},n.push(u);var s,a=[];for(s in e)e.hasOwnProperty(s)&&a.push(s);for(a.sort(),i=0;i<a.length;i+=1)u[s=a[i]]=v(e[s],t,n,o,s);t.pop(),n.pop()}else u=e;return u}f.useLongestToken=!0,f.tokenize=p.tokenize,f.castInput=function(e){var t=this.options,n=t.undefinedReplacement,o=t.stringifyReplacer,r=void 0===o?function(e,t){return void 0===t?n:t}:o;return"string"==typeof e?e:JSON.stringify(v(e,null,null,r),r,"  ")},f.equals=function(e,t){return n.prototype.equals.call(f,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var h=new n;h.tokenize=function(e){return e.slice()},h.join=h.removeEmpty=function(e){return e};var d=exports;for(var m in t)d[m]=t[m];t.__esModule&&Object.defineProperty(d,"__esModule",{value:!0})})();